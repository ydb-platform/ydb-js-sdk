# YDB API Example

–ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã —Å –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–º gRPC API YDB JavaScript SDK.

## –ß—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç

### üîå **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**
- –°–æ–∑–¥–∞–Ω–∏–µ –¥—Ä–∞–π–≤–µ—Ä–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ StaticCredentialsProvider –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### üì° **Discovery Service**
- `listEndpoints()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö endpoint'–æ–≤
- `whoAmI()` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

### ÔøΩ **Scheme Service**
- `listDirectory()` - –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ —Å –ø–æ–º–µ—Ç–∫–æ–π —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü üîß

## –ó–∞–ø—É—Å–∫

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–º–µ—Ä
npm start

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ node
node index.js

# –° –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
DEBUG=ydbjs:* node index.js
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- `YDB_CONNECTION_STRING` - —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ YDB (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `grpc://localhost:2136/local`)

## –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
üîó –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ YDB: grpc://localhost:2136/local
‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ

üì° –î–æ—Å—Ç—É–ø–Ω—ã–µ endpoint'—ã:
   –í—Å–µ–≥–æ: 1
   1. localhost:2136

üÜî –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ:
   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: root
   –ì—Ä—É–ø–ø—ã: –Ω–µ—Ç

üìÅ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
   –ü—É—Ç—å: /local
   –í–ª–∞–¥–µ–ª–µ—Ü: root
   –û–±—ä–µ–∫—Ç–æ–≤: 3
   1. .sys (—Ç–∏–ø: 1) üîß
   2. .sys_health (—Ç–∏–ø: 1) üîß
   3. test_table (—Ç–∏–ø: 2)

‚úÖ –ì–æ—Ç–æ–≤–æ!
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

```javascript
// –°–æ–∑–¥–∞–Ω–∏–µ –¥—Ä–∞–π–≤–µ—Ä–∞ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
let driver = new Driver(connectionString, {
    credentialsProvider: new StaticCredentialsProvider(
        { username: 'root', password: '1234' },
        connectionStringForAuth
    )
})

// –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞
let discovery = driver.createClient(DiscoveryServiceDefinition)

// –í—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ API
let response = await discovery.listEndpoints({ database: driver.database })

// –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
let endpoints = anyUnpack(response.operation?.result, ListEndpointsResultSchema)
```

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **Happy Path –ø–æ–¥—Ö–æ–¥** - –∫–æ–¥ —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —É—Å–ø–µ—à–Ω–æ–º —Å—Ü–µ–Ω–∞—Ä–∏–∏
- **–ú–∏–Ω–∏–º—É–º –ø—Ä–æ–≤–µ—Ä–æ–∫** - —É–±—Ä–∞–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ try/catch –∏ assert
- **–ß–∏—Ç–∞–µ–º—ã–π –≤—ã–≤–æ–¥** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å —ç–º–æ–¥–∑–∏
- **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤** - –∞–ª—Ñ–∞–≤–∏—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –≤ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç:

```bash
cp -r examples/api my-ydb-project
cd my-ydb-project
npm install
npm start
```

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [YDB JavaScript SDK](https://github.com/ydb-platform/ydb-js-sdk)
- [YDB Documentation](https://ydb.tech/docs/)
- [gRPC API Reference](https://ydb.tech/docs/reference/ydb-sdk/)
- [Protocol Buffers](https://protobuf.dev/)
